<!DOCTYPE html>
<head>
    {% load static %}
    {% load custom_filters %}
    <link rel="stylesheet" href="{% static 'style.css'%}">
</head>
<body>
    <h2>Current Projection: {{ overall_result.winner|medium_party_name }} {% if overall_result.majority >= 0 %} Majority of {{overall_result.majority}} {% else %} {{overall_result.majority|negate}} short of a Majority {% endif %}</h2>
    <table id="Seat-Table">
        <tr>
            <td>Party</td>
            <td>Declared</td>
            <td>Projected</td>
        </tr>
        {% for party in party_totals %}
            <tr>
                <td class="{{ party.party }}">{{ party.party|medium_party_name }}</td>
                <td class="{{ party.party }}" style="text-align: right;">{{ party.declared }}</td>
                <td class="{{ party.party }}" style="text-align: right;">{{ party.projected }}</td>
            </tr>
        {% endfor %}
        </table>
    {% if user.is_staff %}
    <div id = "addresults">Click <a href="{% url 'model:addresults' %}">here</a> to add results</div>
    {% endif %}
    <h2>Click on a constituency to view details</h2>
    <div class="constituency-list">
        <ul>
            {% for constituency in constituency_list %}
                <li>
                    <a href="{% url 'model:constituency' constituency.id %}" class = "
                        {% if constituency.result %} 
                            {{ constituency.result.winner }}Won
                        {% elif constituency.detailed_projection %} 
                            {{ constituency.detailed_projection.winner }}
                        {% elif constituency.basic_projection %}
                            {{ constituency.basic_projection.winner }}
                        {% else %} 
                            {{ constituency.winner2019 }}
                        {% endif %}
                    ">
                        {{constituency.name}}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
    Based on information from <a href="https://commonslibrary.parliament.uk/constituency-boundary-review-data-for-new-constituencies/">House of Commons Library</a>, 
    <a href="https://yougov.co.uk/politics/articles/49809-second-yougov-2024-election-mrp-shows-conservatives-on-lowest-seat-total-in-history">YouGov</a>,
    <a href="https://www.ipsos.com/en-uk/uk-opinion-polls/ipsos-election-mrp">Ipsos</a>,
    <a href="https://www.survation.com/survation-mrp-update-labour-set-to-become-the-largest-party-in-scotland/">Survation</a>,
    <a href="https://www.focaldata.com/blog/focaldata-prolific-uk-general-election-mrp">Focaldata</a>,
    <a href="https://www.moreincommon.org.uk/general-election-2024/mrp-19-june-2024/">More in Common</a>,
    <a href="https://www.electoralcalculus.co.uk/homepage.html">Electoral Calculus</a>,
    and various other sources of <a href="https://en.wikipedia.org/wiki/Opinion_polling_for_the_2024_United_Kingdom_general_election#National_poll_results">voting intention polls</a>
    including <a href="https://en.wikipedia.org/wiki/Opinion_polling_for_the_2024_United_Kingdom_general_election#Constituency_polling">individual consituency polls</a> where recent polling was available.
</body>
